{% block head %}
    <style>
        .rating-list li {
            float: right;
            color: #ddd;
            padding: 10px 5px;
        }

        .rating-list li:hover,
        .rating-list li:hover ~ li {
            color: orange;
        }

        .rating-list {
            display: inline-block;
            list-style: none;
        }

        .checked {
            color: orange;
        }
    </style>
    <script src="https://use.fontawesome.com/786636cdc9.js"></script>
    <script>
        const rate = (rating, pk) => {
            fetch(`/details/${pk}/rate/${rating}/`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then(res => {
                window.location.reload();
            })
        }
    </script>
{% endblock %}


<div class="u-layout-wrap u-layout-wrap-1">
    <h3 style="color: orange">Average rating: {{ average }} ({{ rate_count }} votes)</h3>
    <div class="container" style="padding: 1em">
        <div class="card" style="width: 10rem;">
            <div>
                <ul class="btn btn-light list-inline rating-list">
                    <li onclick="rate(5, {{ recipe.pk }})">
                        <i class="fa fa-star {% if recipe.user_rating > 4 %} checked {% endif %}"
                           title="Rate 5"></i></li>
                    <li onclick="rate(4, {{ recipe.pk }})">
                        <i class="fa fa-star {% if recipe.user_rating > 3 %} checked {% endif %}"
                           title="Rate 4"></i></li>
                    <li onclick="rate(3, {{ recipe.pk }})">
                        <i class="fa fa-star {% if recipe.user_rating > 2 %} checked {% endif %}"
                           title="Rate 3"></i></li>
                    <li onclick="rate(2, {{ recipe.pk }})">
                        <i class="fa fa-star {% if recipe.user_rating > 1 %} checked {% endif %}"
                           title="Rate 2"></i></li>
                    <li onclick="rate(1, {{ recipe.pk }})">
                        <i class="fa fa-star {% if recipe.user_rating > 0 %} checked {% endif %}"
                           title="Rate 1"></i></li>
                </ul>
            </div>
        </div>
    </div>
</div>
